<!doctype html>
<html lang="en">
<head>
    <title>growapp-mdl</title>
    <meta charset="utf-8">
    <meta name="description" content="growapp-mdl create vegetation time-lapses">
    <meta http-equiv="content-type" content="text/html; charset=UTF8">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <link rel="icon" href="favicon.ico" type="image/ico">

    <!--link rel="stylesheet" href="./node_modules/material-design-lite/material.min.css"-->
    <link rel="stylesheet" href="./material.min.css">
    <script src="./node_modules/material-design-lite/material.min.js"></script>

    <link rel="stylesheet" href="./iconfont/material-icons.css">
    <link rel="stylesheet" href="./node_modules/mdi/css/materialdesignicons.min.css">


    <style>
		.container {

		}
		.center {
			text-align: center;
		}
		.demo-card-wide.mdl-card {
		  width: 512px;

		}
		.demo-card-wide > .mdl-card__title {
		  color: #fff;
		  height: 320px;
		  background: url('phenolgyicon.svg') center;
		  background-repeat: no-repeat;
		}
		.demo-card-wide > .mdl-card__menu {
		  color: #fff;
		}
	</style>
    <script type="text/javascript" src="cordova.js"></script>

    <script>
    if (typeof cordova != "undefined") {
      // cordova permissions available
      document.addEventListener('deviceready', function() {
        // device is ready, check if permissions are set
		if (cordova.plugins && cordova.plugins.permissions) {
			var permissions = cordova.plugins.permissions;

			var errorCallback = function() {
			  console.log('3');
			  console.warn('Location permission is not turned on');
			  setTimeout(function(){window.location= "main.html"}, 500);
			}

			var checkPermissionCoarseLocationCallback = function(status){
			  if (!status.hasPermission) {
				errorCallback();
			  } else {
				// all permissions granted
				window.location = "main.html";
				//setTimeout(function(){window.location= "main.html"}, 2000);
			  }
			}
			var checkPermissionFineLocationCallback = function(status) {
			  console.log('6');
			  if(!status.hasPermission) {

				permissions.requestPermission(
				  permissions.ACCESS_FINE_LOCATION, function(status) {
					if(!status.hasPermission) {
					  errorCallback();
					} else {
					  permissions.requestPermission(permissions.ACCESS_COARSE_LOCATION, checkPermissionCoarseLocationCallback)
					}
				  },
				  errorCallback);
			  } else {
				permissions.requestPermission(permissions.ACCESS_COARSE_LOCATION, checkPermissionCoarseLocationCallback)
			  }
			}
			permissions.hasPermission(permissions.ACCESS_FINE_LOCATION, checkPermissionFineLocationCallback, null);
		}
      }, false);
    } else {
	  window.location="main.html";
    }
    function setup()
    {
    }

    </script>
    </head>
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
	<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta name="generator" content="HTML Tidy for Windows (vers 14 February 2006), see www.w3.org" />
		<title>GrowApp</title>
	</head>
	<body style="" onload="setup()">
		<div class="mdl-grid">
		    <div class="mdl-layout-spacer"></div>
			<div class="demo-card-wide mdl-card mdl-shadow--2dp">
				<div class="mdl-card__title">
					<h2 class="mdl-card__title-text"></h2>
				</div>
				<div class="center mdl-card__supporting-text"><h2>GrowApp</h2>
					Animate Your Environment!
				</div>
				<div class="mdl-card__actions mdl-card--border">
				Loading...
				</div>
			</div>
		    <div class="mdl-layout-spacer"></div>
		</div>
</body>
</html>